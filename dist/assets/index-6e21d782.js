var v=Object.defineProperty;var I=(n,e,t)=>e in n?v(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var g=(n,e,t)=>(I(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&u(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();class d{constructor(e,t,u){this.label=e,this.value=t,this.category=u}}const s=class{static loadFromStorage(){for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e),u=JSON.parse(localStorage.getItem(t));this.units.set(t,new d(...u))}}static convert(e,t,u){const o=this.units.get(e),l=this.units.get(u);return o.category!=l.category?null:Number(t)*o.value/l.value}static addCustomUnit(e,t,u){const o=[e,Number(t),u],l=crypto.randomUUID();return localStorage.setItem(l,JSON.stringify(o)),this.units.set(l,new d(...o)),l}static removeCustomUnit(e){localStorage.removeItem(e),this.units.delete(e)}static unitsInCategory(e){return[...this.units].filter(t=>t[1].category==e).map(t=>t[0])}};let c=s;g(c,"units",new Map([["mg",new d("мг",.001,"weight")],["g",new d("г",1,"weight")],["kg",new d("кг",1e3,"weight")],["q",new d("центнеры",1e5,"weight")],["t",new d("тонны",1e6,"weight")],["oz",new d("унции",28.35,"weight")],["lb",new d("фунты",453.59,"weight")],["ct",new d("караты",.2,"weight")],["ml",new d("мл",1,"volume")],["l",new d("л",1e3,"volume")],["pt",new d("пинты",568.26,"volume")],["tspn",new d("чайные ложки",5,"volume")],["tbsp",new d("столовые ложки",15,"volume")],["cup",new d("стаканы",200,"volume")]])),(()=>{s.loadFromStorage()})();document.addEventListener("DOMContentLoaded",E);let i;function E(){y("weight"),document.getElementById("category").onchange=function(){y(this.value)},document.getElementById("value1").oninput=m,document.getElementById("value2").oninput=m,document.getElementById("unit1").onchange=m,document.getElementById("unit2").onchange=m,document.getElementById("showAddModal").onclick=()=>{document.getElementById("converter").hidden=!0,document.getElementById("addModal").hidden=!1,document.getElementById("removeModal").hidden=!0},document.getElementById("showRemoveModal").onclick=()=>{document.getElementById("converter").hidden=!0,document.getElementById("addModal").hidden=!0,document.getElementById("removeModal").hidden=!1;const n=document.getElementById("customUnit").childElementCount;document.getElementById("removeUnit").disabled=n==0},Array.from(document.getElementsByClassName("cancel")).forEach(n=>n.onclick=r),h("weight"),document.getElementById("addUnit").onclick=B,document.getElementById("customCategoryAdd").onchange=function(){h(this.value)},f("weight"),document.getElementById("removeUnit").onclick=p,document.getElementById("customCategoryRemove").onchange=function(){f(this.value)}}function r(){document.getElementById("converter").hidden=!1,Array.from(document.getElementsByClassName("modal")).forEach(n=>n.hidden=!0)}function y(n){document.getElementById("value1").value=1,document.getElementById("value2").value=1;const e=new DocumentFragment;c.unitsInCategory(n).forEach(t=>{e.append(new Option(c.units.get(t).label,t))}),document.getElementById("unit1").replaceChildren(e.cloneNode(!0)),document.getElementById("unit2").replaceChildren(e)}function h(n){document.getElementById("customLabel").value="",document.getElementById("customValue").value=1;const e=document.getElementById("baseUnit");switch(n){case"weight":e.innerText=" г";break;case"volume":e.innerText=" мл";break}}function f(n){const e=new DocumentFragment,t=c.unitsInCategory(n).filter(u=>localStorage.getItem(u));t.forEach(u=>{e.append(new Option(c.units.get(u).label,u))}),document.getElementById("customUnit").replaceChildren(e),document.getElementById("removeUnit").disabled=t.length==0}function m(){this.tagName=="INPUT"&&(i=this);let n,e,t,u;i===void 0&&this.id=="unit1"||(i==null?void 0:i.id)=="value1"?(n=document.getElementById("value1").value,e=document.getElementById("unit1").value,t=document.getElementById("value2"),u=document.getElementById("unit2").value):(n=document.getElementById("value2").value,e=document.getElementById("unit2").value,t=document.getElementById("value1"),u=document.getElementById("unit1").value),t.value=c.convert(e,n,u)}function B(){const n=document.getElementById("customLabel").value.trim(),e=Number(document.getElementById("customValue").value),t=document.getElementById("customCategoryAdd").value;if(n==""||isNaN(e)||e==0){alert("Заполните все поля!");return}const u=c.addCustomUnit(n,e,t),o=new Option(n,u);document.getElementById("category").value==t&&(document.getElementById("unit1").append(o.cloneNode(!0)),document.getElementById("unit2").append(o.cloneNode(!0))),document.getElementById("customCategoryRemove").value==t&&document.getElementById("customUnit").append(o),r()}function p(){const n=document.getElementById("customUnit").value;c.removeCustomUnit(n),Array.from(document.querySelectorAll(`.units > option[value="${n}"]`)).forEach(e=>e.remove()),r()}
